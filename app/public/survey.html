<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
   
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/css/bootstrap.min.css" integrity="sha384-Smlep5jCw/wG7hdkwQ/Z5nLIefveQRIY9nfy6xoR1uRYBtpZgI6339F5dgvm/e9B" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/js/bootstrap.min.js" integrity="sha384-o+RDsa0aLu++PJvFqy8fFScvbHFLtbvScb8AjopnFD+iEQ7wo/CG0xlczd+2O/em" crossorigin="anonymous"></script>

       


<title>FriendFinder</title>
    <style>
        h3 {
            font-size: 20px;

        }

        h4 {
            font-size: 15px;
            color: red;

        }
    </style>
</head>
<script>

</script>

<body>
    <div class="container">
        <h1> Survey Questions</h1>

        <div id="wrapper">


            <hr>
            <h3>About You</h3>
            <form id="survey_form" method="POST" action="/api/friends">
                <h4>Name (Required)</h4>
                <input type="text" id="name" class="form-control" required>

                <h4>Link toPhoto Image (Required)</h4>
                <input type="text" id="photo" class="form-control" required>
                <hr>

                <h3>Question 1</h3>
                <h4>Your mind is always buzzin with unexplored ideas and plans.</h4>
                <select class="ansSelected" id="q1" required>
                    <option value="">Select Your Option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

                <h3>Question 2</h3>
                <h4>Generally speaking, you rely more on your experience than your imagination.</h4>
                <select class="ansSelected" id="q2" required>
                    <option value="">Select Your Option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

                <h3>Question 3</h3>
                <h4>You find it easy to stay relaxed and focused even when there is some pressure.</h4>
                <select class="ansSelected" id="q3" required>
                    <option value="">Select Your Option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

                <h3>Question 4</h3>
                <h4>You rarely do something just out of sheer curiosity.</h4>
                <select class="ansSelected" id="q4" required>
                    <option value="">Select Your Option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

                <h3>Question 5</h3>
                <h4>People can rarely upset you.</h4>
                <select class="ansSelected" id="q5" required>
                    <option value="">Select Your Option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

                <h3>Question 6</h3>
                <h4>It is often difficult for you to releate to other people's feelings.</h4>
                <select class="ansSelected" id="q6" required>
                    <option value="">Select Your Option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

                <h3>Question 7</h3>
                <h4>In a dicsussion, truth shoud be more important than people's sensitivities.</h4>
                <select class="ansSelected" id="q7" required>
                    <option value="">Select Your Option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

                <h3>Question 8</h3>
                
                <h4>You rarely get carried away by fantasies and ideas.</h4>
                <select class="ansSelected" id="q8">
                    <option value="">Select Your Option</option>
                   
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

                <h3>Question 9</h3>
                <h4>You think that everyone's views should be respected regardless of whether they are supported by
                    facts or
                    not.</h4>
                <select class="ansSelected" id="q9" required>
                    <option value="">Select Your Option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

                <h3>Question 10</h3>
                <h4>You feel more energetic after spending time with a group of people.</h4>
                <select class="ansSelected" id="q10" required>
                    <option value="">Select Your Option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

                <br>
                <br>

                <!--Submit Button-->
                <button type="submit" class="btn btn-primary btn-block" id="submit">
                    <h3>Submit</h3>
                </button>
            </form>
            <hr>

        </div>
        
    </div>

<!-- Modal -->
<div class="modal fade" id="modalBestMatch" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel"><strong>Best Match</strong></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <h2 id="bestMatchName"></h2>
                <img id="bestMatchImage" src="" alt="match-image">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>



    <script type="text/javascript">    

        let scores = [];
        var qtn;
        

        function testQtn(qtn) {
            $(qtn).each(function () {
                if ($(this).val() === "") {
                    alert(" Error! At least one question needs to be selected");
                } else {
                    // return true;
                    var selectedOption = $(this).children("option:selected").val();
                    //var selectedOption = $(qtn).val();
                    scores.push(selectedOption);
                }
            });



        }
        //testQtn(qtn);
        //console.log(scores);

        // //$('#sel1 option:selected').val();
        // function getUserAnswers() {
        //     switch (qtn) {
        //         case '#q1':
        //             testQtn();
        //             break;
        //         case '#q2':
        //             testQtn();
        //             break;
        //         default:
        //             console.log('Sorry o!,  ');
        //     }
        //     console.log(scores);
        // }

    var currentURL = window.location.origin;
    //console.log (currentURL);
        $("#submit").click(function (event) {
            event.preventDefault();
            let name = $("#name").val().trim();
            let photo = $("#photo").val().trim();
            testQtn("#q1");
            testQtn("#q2");
            testQtn("#q3");
            testQtn("#q4");
            testQtn("#q5");
            testQtn("#q6");
            testQtn("#q7");
            testQtn("#q8");
            testQtn("#q9");
            testQtn("#q10");
            console.log(scores);
            new_person = {
                name: name,
                photo: photo,
                score: scores
            }
            console.log(new_person);
                                        
            $.post(currentURL + "/api/friends", new_person)
               .then(function (data) {
                //console.log('Best Match :' + JSON.stringify(data));
               console.log("name :" + data.photo);
                 // Set the modal values
                //$('#bestMatchName').html(data.name);
               //$("#bestMatchImage").attr("src", data.photo);
                 //Pop open the modal dialog
                
                 $("#bestMatchName").text(data.name);
                   $("#bestMatchImage").attr("src", data.photo);
                   $("#modalBestMatch").modal("toggle");               
                    
                });
                //clear form field after submission
            $('#survey_form input[type="text"]').val('');
            //modal logic
            




        });
            

        

    </script>
</body>

</html>